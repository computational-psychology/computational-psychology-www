HOWTO
------
------

Requirements 
-------------
- pelican 
- having AFS configured in your machine (requirement: tubIT account)



Installation
------------

https://www.campusmanagement.tu-berlin.de/menue/dienste/daten_server/andrew_file_system/zugriff_auf_afs-daten_per_openafs-client/

In linux it is encessary to have the kernel headers installed
sudo apt-get install linux-headers-$(uname -r)

0. Follow Installation instructions from tubIT for AFS
    After configuring, you should have access to the folder
    /afs/tu-berlin.de/units/Fak_IV/psyco/www/www.psyco/htdocs
    
1. Install Pelican apt-get or using pip.
	'sudo apt-get install pelican'
	
	alternatively, 'pip install pelican' 
		
2. Clone the repository to a local folder

	'git clone --recursive  git@github.com:computational-psychology/computational-psychology.github.io.git'



Workflow
----------

To edit locally:
----------------
1. Go to the repository root folder and pull the latest version from github with 'git pull'

2. Edit what you need to edit.
	Pages are located in content/pages, images in content/imgs
	
3. After editing, go to root of your local repository and run 'make html' to test that the website compiles locally. No errors should occur.
   You can see the local version of the page inside folder output/. Open index.html with a browser.

   
To save changes:
------------------
4. Save your changes with 'git add' and 'git commit'.  Push your changes to github with 'git push'



To publish your changes:
-------------------------
5. First you need to make sure that you have AFS running and be logged in:
	
	- by  default AFS shoud be running as a service. you can check that with 'sudo service openafs-client  status'
	
	- after every restart / session you need to log in into AFS. for that, as a normal user you run these two commands, replacing
	   tubITuser with user name, enter TUBIT password 
	
		1. 'kinit tubITuser'
		
		2. 'aklog'

if things do not work - check whether you have access to afs folder

'cd /afs/tu-berlin.de/units/Fak_IV/psyco/www/www.psyco/htdocs'

6. Finally, publish you changes by copying edited files to our AFS directory
    - go to root of local repository and run ./publish.sh (shell script)



