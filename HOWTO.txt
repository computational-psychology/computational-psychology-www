HOWTO
------
------

Requirements 
-------------
- pelican 
- having AFS configured in your machine (requirement: tubIT account)



Installation
------------

https://www.campusmanagement.tu-berlin.de/menue/dienste/daten_server/andrew_file_system/zugriff_auf_afs-daten_per_openafs-client/

0. Follow Installation instructions from tubIT for AFS
    After configuring, you should have access to the folder
    /afs/tu-berlin.de/units/Fak_IV/psyco/www/www.psyco/htdocs
    
1. Install Pelican apt-get or using pip.
	'sudo apt-get install pelican'
	
	alternatively, 'pip install pelican' 
		
2. Clone the repository to a local folder

	'git clone --recursive  git@github.com:computational-psychology/computational-psychology.github.io.git'



Workflow
----------

To edit locally:

1. Go to the repository root folder and pull the latest version from github with 'git pull'

2. Edit what you need to edit.
	Pages are located in content/pages, images in content/imgs
	
3. After editing, run 'make html' to test that the website compiles locally. No errors should occur.
   You can see the local version of the page inside folder output/. Open index.html with a browser.

   
To save changes:

4. Save your changes with 'git add' and 'git commit'.  Push your changes to github with 'git push'



To publish your changes:

5. First you need to make sure that you have AFS running and be logged in:
	
	- by  default AFS shoud be running as a service. you can check that with 'sudo service openafs-client  status'
	
	- after every restart / session you need to log in into AFS. for that, as a normal user you run these two commands, replacing
	   tubITuser 
	
		'kinit tubITuser'
		'aklog'
		

6. Finally, publish you changes by running the shell script ./publish.sh.

	This will deploy the changes by coping the output/ folder which contains the rendered website to the website folder in the server mounted via AFS.



